var Tooltip=Class.create();Tooltip.prototype={initialize:function(e,t){var n=Object.extend({default_css:false,margin:"0px",padding:"5px",backgroundColor:"#d6d6fc",min_distance_x:5,min_distance_y:5,delta_x:0,delta_y:0,zindex:1e3},arguments[2]||{});this.element=$(e);this.options=n;if($(t)){this.tool_tip=$(t)}else{this.tool_tip=$(document.createElement("div"));document.body.appendChild(this.tool_tip);this.tool_tip.addClassName("tooltip");this.tool_tip.appendChild(document.createTextNode(t))}this.tool_tip.hide();this.eventMouseOver=this.showTooltip.bindAsEventListener(this);this.eventMouseOut=this.hideTooltip.bindAsEventListener(this);this.eventMouseMove=this.moveTooltip.bindAsEventListener(this);this.registerEvents()},destroy:function(){Event.stopObserving(this.element,"mouseover",this.eventMouseOver);Event.stopObserving(this.element,"mouseout",this.eventMouseOut);Event.stopObserving(this.element,"mousemove",this.eventMouseMove)},registerEvents:function(){Event.observe(this.element,"mouseover",this.eventMouseOver);Event.observe(this.element,"mouseout",this.eventMouseOut);Event.observe(this.element,"mousemove",this.eventMouseMove)},moveTooltip:function(e){Event.stop(e);var t=Event.pointerX(e);var n=Event.pointerY(e);var r=Element.getDimensions(this.tool_tip);var i=r.width;var s=r.height;if(i+t>=this.getWindowWidth()-this.options.min_distance_x){t=t-i;t=t-this.options.min_distance_x}else{t=t+this.options.min_distance_x}if(s+n>=this.getWindowHeight()-this.options.min_distance_y){n=n-s;n=n-this.options.min_distance_y}else{n=n+this.options.min_distance_y}this.setStyles(t,n)},showTooltip:function(e){Event.stop(e);this.moveTooltip(e);new Element.show(this.tool_tip)},setStyles:function(e,t){Element.setStyle(this.tool_tip,{position:"absolute",display:"block",top:t+this.options.delta_y+"px",left:e+this.options.delta_x+"px",zindex:this.options.zindex});if(this.options.default_css){Element.setStyle(this.tool_tip,{margin:this.options.margin,padding:this.options.padding,backgroundColor:this.options.backgroundColor,zindex:this.options.zindex})}},hideTooltip:function(e){new Element.hide(this.tool_tip)},getWindowHeight:function(){var e;if(navigator.appVersion.indexOf("MSIE")>0){e=document.body.clientHeight}else{e=window.innerHeight}return e},getWindowWidth:function(){var e;if(navigator.appVersion.indexOf("MSIE")>0){e=document.body.clientWidth}else{e=window.innerWidth}return e}}