function getPageScroll(){var e;if(self.pageYOffset){e=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){e=document.documentElement.scrollTop}else if(document.body){e=document.body.scrollTop}arrayPageScroll=new Array("",e);return arrayPageScroll}function getPageSize(){var e,t;if(window.innerHeight&&window.scrollMaxY){e=document.body.scrollWidth;t=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;t=document.body.scrollHeight}else{e=document.body.offsetWidth;t=document.body.offsetHeight}var n,r;if(self.innerHeight){n=self.innerWidth;r=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){n=document.documentElement.clientWidth;r=document.documentElement.clientHeight}else if(document.body){n=document.body.clientWidth;r=document.body.clientHeight}if(t<r){pageHeight=r}else{pageHeight=t}if(e<n){pageWidth=n}else{pageWidth=e}arrayPageSize=new Array(pageWidth,pageHeight,n,r);return arrayPageSize}function pause(e){var t=new Date;var n=t.getTime()+e;while(true){t=new Date;if(t.getTime()>n)return}}function listenKey(){document.onkeypress=hideLightbox}function showLightbox(e){var t=document.getElementById("overlay");var n=document.getElementById("lightbox");var r=document.getElementById("lightboxCaption");var i=document.getElementById("lightboxImage");var s=document.getElementById("loadingImage");var o=document.getElementById("lightboxDetails");var u=getPageSize();var a=getPageScroll();if(s){s.style.top=a[1]+(u[3]-35-s.height)/2+"px";s.style.left=(u[0]-20-s.width)/2+"px";s.style.display="block"}t.style.height=u[1]+"px";t.style.display="block";imgPreload=new Image;imgPreload.onload=function(){i.src=e.href;var f=a[1]+(u[3]-35-imgPreload.height)/2;var l=(u[0]-20-imgPreload.width)/2;n.style.top=f<0?"0px":f+"px";n.style.left=l<0?"0px":l+"px";o.style.width=imgPreload.width+"px";if(e.getAttribute("title")){r.style.display="block";r.innerHTML=e.getAttribute("title")}else{r.style.display="none"}if(navigator.appVersion.indexOf("MSIE")!=-1){pause(250)}if(s){s.style.display="none"}n.style.display="block";u=getPageSize();t.style.height=u[1]+"px";listenKey();return false};imgPreload.src=e.href}function hideLightbox(){objOverlay=document.getElementById("overlay");objLightbox=document.getElementById("lightbox");objOverlay.style.display="none";objLightbox.style.display="none";document.onkeypress=""}function initLightbox(){if(!document.getElementsByTagName){return}var e=document.getElementsByTagName("a");for(var t=0;t<e.length;t++){var n=e[t];if(n.getAttribute("href")&&n.getAttribute("rel")=="lightbox"){n.onclick=function(){showLightbox(this);return false}}}var r=document.getElementsByTagName("body").item(0);var i=document.createElement("div");i.setAttribute("id","overlay");i.onclick=function(){hideLightbox();return false};i.style.display="none";i.style.position="absolute";i.style.top="0";i.style.left="0";i.style.zIndex="90";i.style.width="100%";r.insertBefore(i,r.firstChild);var s=getPageSize();var o=getPageScroll();var u=new Image;u.onload=function(){var e=document.createElement("a");e.setAttribute("href","#");e.onclick=function(){hideLightbox();return false};i.appendChild(e);var t=document.createElement("img");t.src=loadingImage;t.setAttribute("id","loadingImage");t.style.position="absolute";t.style.zIndex="150";e.appendChild(t);u.onload=function(){};return false};u.src=loadingImage;var a=document.createElement("div");a.setAttribute("id","lightbox");a.style.display="none";a.style.position="absolute";a.style.zIndex="100";r.insertBefore(a,i.nextSibling);var f=document.createElement("a");f.setAttribute("href","#");f.setAttribute("title","Click to close");f.onclick=function(){hideLightbox();return false};a.appendChild(f);var l=new Image;l.onload=function(){var e=document.createElement("img");e.src=closeButton;e.setAttribute("id","closeButton");e.style.position="absolute";e.style.zIndex="200";f.appendChild(e);return false};l.src=closeButton;var c=document.createElement("img");c.setAttribute("id","lightboxImage");f.appendChild(c);var h=document.createElement("div");h.setAttribute("id","lightboxDetails");a.appendChild(h);var p=document.createElement("div");p.setAttribute("id","lightboxCaption");p.style.display="none";h.appendChild(p)}function addLoadEvent(e){var t=window.onload;if(typeof window.onload!="function"){window.onload=e}else{window.onload=function(){t();e()}}}var loadingImage="/media/loading.gif";var closeButton="/media/close.gif";addLoadEvent(initLightbox)