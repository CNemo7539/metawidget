<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:m="http://metawidget.org/faces">

	<h:head/>
	
    <h:body>

		<h1>JSF2 AJAX ReRender Quirks</h1>

		<h:messages/>
		
		<h:form id="form">
		
			<p>
				Test execute @this and render a sibling component
			</p>
			
			<m:metawidget id="metawidget1" value="#{ajaxReRenderQuirks}" config="metawidget-jsf2.xml">
				<h:selectOneMenu id="ajaxReRenderQuirksSelect" value="#{ajaxReRenderQuirks.select}">
					<f:selectItem itemValue=""/>
					<f:selectItem itemValue="Foo"/>
					<f:selectItem itemValue="Bar"/>
					<f:ajax render="ajaxReRenderQuirksSelected"/>
				</h:selectOneMenu>
			</m:metawidget>

			<hr/>
			
			<p>
				Test execute/render whole Metawidget
			</p>

			<m:metawidget id="metawidget2" value="#{ajaxReRenderQuirks}" config="metawidget-jsf2.xml">
				<h:selectOneMenu id="ajaxReRenderQuirksSelect_2" value="#{ajaxReRenderQuirks.select}">
					<f:selectItem itemValue=""/>
					<f:selectItem itemValue="Foo"/>
					<f:selectItem itemValue="Bar"/>
					<f:ajax execute="metawidget2" render="metawidget2"/>
				</h:selectOneMenu>
			</m:metawidget>

			<hr/>
			
			<p>
				Test execute @this but render whole Metawidget
			</p>

			<m:metawidget id="metawidget3" value="#{ajaxReRenderQuirks}" buildWidgetsOnAjaxRequest="true" config="metawidget-jsf2.xml">
				<h:selectOneMenu id="ajaxReRenderQuirksSelect_3" value="#{ajaxReRenderQuirks.select}">
					<f:selectItem itemValue=""/>
					<f:selectItem itemValue="Foo"/>
					<f:selectItem itemValue="Bar"/>
					<f:ajax render="metawidget3"/>
				</h:selectOneMenu>
			</m:metawidget>
		</h:form>
		
	</h:body>	    
</html>
