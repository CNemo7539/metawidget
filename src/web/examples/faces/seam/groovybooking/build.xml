<project name="metawidget-seam-booking" default="build">

	<!-- Properties -->
		
	<property file="build.properties"/>
	
	<!-- Clean -->
	
	<target name="clean">
		<delete dir="${seam.dir}/examples/metawidget-groovybooking"/>
	</target>

	<!-- Build -->

	<target name="build">

		<delete dir="${seam.dir}/examples/metawidget-groovybooking"/>
		
		<!-- Copy the original Seam groovybooking example -->
		
		<copy todir="${seam.dir}/examples/metawidget-groovybooking">
			<fileset dir="${seam.dir}/examples/groovybooking"/>
		</copy>
		
		<!-- Clean it -->
		
		<ant dir="${seam.dir}/examples/metawidget-groovybooking" target="clean" inheritall="false"/>		

		<!-- Replace some files with Metawidget versions -->

		<copy todir="${seam.dir}/examples/metawidget-groovybooking" overwrite="true">
			<fileset dir=".">
				<include name="resources/**"/>
				<include name="src/**"/>
				<include name="view/**"/>
			</fileset>
		</copy>

    	<copy todir="${seam.dir}/examples/metawidget-groovybooking/exploded-archives/jboss-seam-groovy.war/WEB-INF/lib">
    		<fileset dir="../../../../">
    			<include name="metawidget.jar"/>
    		</fileset>
    		
    		<!-- Version of Hibernate Validator shipped with JBoss 4.2.2.GA does not include @Digits -->
    		
    		<fileset dir="${seam.dir}/lib">    			
    			<include name="hibernate-annotations.jar"/>
    			<include name="hibernate-commons-annotations.jar"/>
    			<include name="hibernate-validator.jar"/>
    		</fileset>    		
		</copy>

		<delete file="${seam.dir}/lib/groovy-all.jar"/>
		
		<copy todir="${seam.dir}/lib" file="../../../../metawidget.jar"/>
		<copy tofile="${seam.dir}/lib/groovy-all.jar" file="groovy-all-1.5.6.jar"/>

		<ant dir="${seam.dir}/examples/metawidget-groovybooking" inheritall="false"/>
		
	</target>

</project>
