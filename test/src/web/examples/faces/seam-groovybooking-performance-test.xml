<project name="faces-seam-groovybooking-performance-test" default="test-with-metawidget">

	<property file="../../../../../build.properties" />
	<property file="../../../../build.properties" />
	<import file="${webtest.dir}/webtest.xml" />

	<target name="test-with-metawidget" depends="wt.defineTasks">
		<webtest name="test-with-metawidget">
			<config resultpath="../../../../../${build.dir}/run/logs" easyajax="true"/>
			<steps>
				<invoke url="${webtest.url}/jboss-seam-groovybooking/home.seam" />
				<verifyTitle text="JBoss Suites: Seam Framework" />			
				<clickLink label="Register New User"/>
				
				<setInputField name="register:usernameDecorate:username" value="NewUser"/>
				<setInputField name="register:nameDecorate:name" value="New User Real Name"/>
				<setInputField name="register:passwordDecorate:password" value="New Password"/>
				<setInputField name="register:verifyDecorate:verify" value="New Password"/>
				<clickButton label="Register"/>
				<verifyXPath xpath="normalize-space(//*[@class='errors']/ul/li)" text="Successfully registered as NewUser"/>
				
				<repeat count="100">
					<setInputField name="login:username" value="NewUser"/>
					<setInputField name="login:password" value="New Password"/>
					<clickButton label="Account Login"/>
	
					<clickButton label="Find Hotels"/>
						
					<clickLink label="View Hotel"/>
					<clickButton label="Book Hotel"/>
					<clickButton label="Proceed"/>
					
					<setSelectField name="booking:bookingBeds" value="2"/>				
					<setInputField name="booking:bookingCreditCard" value="123412341234"/>
					<setInputField name="booking:bookingCreditCardName" value="RK"/>
					<clickButton label="Proceed"/>
					
					<setInputField name="booking:bookingCreditCard" value="1234123412341234"/>
					<clickButton label="Proceed"/>
	
					<setInputField name="booking:bookingCreditCardName" value="Richard Kennard"/>
					<clickButton label="Proceed"/>
					
					<clickButton label="Confirm"/>
					<verifyText text="Thank you, New User Real Name, your confimation number for Marriott Courtyard is "/>
					
					<clickLink label="Logout"/>
				</repeat>
				
			</steps>
		</webtest>
	</target>

	<target name="test-without-metawidget" depends="wt.defineTasks">
		<webtest name="test-without-metawidget">
			<config resultpath="../../../../../${build.dir}/run/logs" easyajax="true"/>
			<steps>
				<invoke url="${webtest.url}/jboss-seam-groovybooking/home.seam" />
				<verifyTitle text="JBoss Suites: Seam Framework" />
				<clickLink label="Register New User"/>
				
				<setInputField name="register:usernameDecorate:username" value="NewUser"/>
				<setInputField name="register:nameDecorate:name" value="New User Real Name"/>
				<setInputField name="register:passwordDecorate:password" value="New Password"/>
				<setInputField name="register:verifyDecorate:verify" value="New Password"/>
				<clickButton label="Register"/>
				<verifyXPath xpath="normalize-space(//*[@class='errors']/ul/li)" text="Successfully registered as NewUser"/>
				
				<repeat count="100">
					<setInputField name="login:username" value="NewUser"/>
					<setInputField name="login:password" value="New Password"/>
					<clickButton label="Account Login"/>
	
					<clickButton label="Find Hotels"/>
						
					<clickLink label="View Hotel"/>
					<clickButton label="Book Hotel"/>
					<clickButton label="Proceed"/>
					
					<setSelectField name="booking:bedsDecorate:beds" value="2"/>
					<setInputField name="booking:creditCardDecorate:creditCard" value="123412341234"/>
					<setInputField name="booking:creditCardNameDecorate:creditCardName" value="RK"/>
					<clickButton label="Proceed"/>
					
					<setInputField name="booking:creditCardDecorate:creditCard" value="1234123412341234"/>
					<clickButton label="Proceed"/>
	
					<setInputField name="booking:creditCardNameDecorate:creditCardName" value="Richard Kennard"/>
					<clickButton label="Proceed"/>
					
					<clickButton label="Confirm"/>
					<verifyText text="Thank you, New User Real Name, your confimation number for Marriott Courtyard is "/>
					
					<clickLink label="Logout"/>
				</repeat>
				
			</steps>
		</webtest>
	</target>

</project>
