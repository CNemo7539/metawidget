<project name="faces-allwidgets-test" default="test-all">

	<property file="../../../../build.properties" />
	<import file="${webtest.dir}/lib/taskdef.xml" />

	<target name="test-all">
		<webtest name="test-faces">
			<config resultpath="${build.dir}"/>
			<steps>
				<invoke url="${webtest.url}/quirks-faces" />
				
				<verifyXPath xpath="count(/html/body/table[1]/tbody/tr)" text="3"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[1]/th" text="3 boolean:"/>
				
				<!-- Test the 'not tri-state if not listbox' in HtmlMetawidget.buildActiveWidget -->

				<verifyXPath xpath="count(/html/body/table[1]/tbody/tr[1]/td[1]/table/tbody/tr/td)" text="2"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[1]/td[1]/table/tbody/tr/td[1]/input/@type" text="radio"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[1]/td[1]/table/tbody/tr/td[1]/label" text="Yes"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[1]/td[1]/table/tbody/tr/td[2]/input/@type" text="radio"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[1]/td[1]/table/tbody/tr/td[2]/label" text="No"/>

				<!-- Test spanning of large components that don't have a label -->
								
				<verifyXPath xpath="count(/html/body/table[1]/tbody/tr[2]/th)" text="0"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[2]/td[1]/textarea/@id" text="quirksLarge"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[2]/td[1]/@colspan" text="5"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[2]/td[2]" text="*"/>

				<!-- Test Lists with a UiLookup -->
								
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/th[1]" text="Strings:"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[1]/table/tbody/tr/td[1]/input[@type='checkbox']/@value" text="Foo"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[1]/table/tbody/tr/td[1]/label" text="Foo"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[1]/table/tbody/tr/td[2]/input[@type='checkbox']/@value" text="Bar"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[1]/table/tbody/tr/td[2]/label" text="Bar"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[1]/table/tbody/tr/td[3]/input[@type='checkbox']/@value" text="Baz"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[1]/table/tbody/tr/td[3]/label" text="Baz"/>
				<verifyXPath xpath="count(/html/body/table[1]/tbody/tr[3]/td[1]/table/tbody/tr/td)" text="3"/>

				<!-- Test Lists with a FacesLookup -->
								
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/th[2]" text="More strings:"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[3]/table/tbody/tr/td[1]/input[@type='checkbox']/@value" text="MoreFoo"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[3]/table/tbody/tr/td[1]/label" text="MoreFoo"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[3]/table/tbody/tr/td[2]/input[@type='checkbox']/@value" text="MoreBar"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[3]/table/tbody/tr/td[2]/label" text="MoreBar"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[3]/table/tbody/tr/td[3]/input[@type='checkbox']/@value" text="MoreBaz"/>
				<verifyXPath xpath="/html/body/table[1]/tbody/tr[3]/td[3]/table/tbody/tr/td[3]/label" text="MoreBaz"/>
				<verifyXPath xpath="count(/html/body/table[1]/tbody/tr[3]/td[3]/table/tbody/tr/td)" text="3"/>

				<!-- Test zero columns -->
				
				<verifyXPath xpath="count(/html/body/table[2]/tbody/tr)" text="7"/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[1]/th" text="3 boolean:"/>
				<verifyXPath xpath="count(/html/body/table[2]/tbody/tr[2]/td[1]/table/tbody/tr/td)" text="2"/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[2]/td[1]/table/tbody/tr/td[1]/input/@type" text="radio"/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[2]/td[1]/table/tbody/tr/td[1]/label" text="Yes"/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[2]/td[1]/table/tbody/tr/td[2]/input/@type" text="radio"/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[2]/td[1]/table/tbody/tr/td[2]/label" text="No"/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[3]/td[1]/textarea/@id" text="quirksLarge_2"/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[3]/td[1]/@colspan" text=""/>
				<verifyXPath xpath="/html/body/table[2]/tbody/tr[3]/td[2]" text="*"/>

				<!-- Test the '-1 check' in UIMetawidget.inspect -->
			
				<verifyXPath xpath="count(/html/body/table[3]/tbody/tr)" text="0"/>
			</steps>
		</webtest>
	</target>

</project>
