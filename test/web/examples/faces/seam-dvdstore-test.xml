<project name="faces-seam-dvdstore-test" default="test-all">

	<property file="../../../../build.properties" />
	<property name="build.metawidget.dir" value="${build.dir}/metawidget-${metawidget.version}" />

	<import file="${webtest.dir}/lib/taskdef.xml" />

	<!-- Test Search Screen -->

	<target name="test-all">
		<webtest name="test-all">
			<config resultpath="${build.metawidget.dir}">
				<header name="User-Agent" value="Mozilla/4.0" />
				<option name="ThrowExceptionOnScriptError" value="false" />
			</config>
			<steps>
				<invoke url="${webtest.url}/seam-dvd/home" />
				<verifyTitle text="JBoss DVD Store" />
				<clickLink label="Create Account" />

				<clickButton label="Next" />
				<verifyText text="User name: Validation Error: Value is required." />
				<verifyText text="Password: Validation Error: Value is required." />
				<verifyText text="Password verify: Validation Error: Value is required." />
				<setInputField name="newuser:customerUserName" value="NewUser" />
				<setInputField name="newuser:customerPassword" value="New Password" />
				<setInputField name="newuser:editCustomerPasswordVerify" value="New Password" />
				<clickButton label="Next" />

				<setInputField name="newuser:customerEmail" value="user" />
				<clickButton label="Next" />

				<verifyText text="First name: Validation Error: Value is required." />
				<verifyText text="Last name: Validation Error: Value is required." />
				<verifyText text="Address 1: Validation Error: Value is required." />
				<verifyText text="Address 2: Validation Error: Value is required." />
				<verifyText text="City: Validation Error: Value is required." />
				<verifyText text="State: Validation Error: Value is required." />
				<verifyText text="Zip: Validation Error: Value is required." />
				<!-- Can't do this here until JBSEAM-3251 is fixed: verifyText text="not a well-formed email address" -->				
				<clickButton label="Next" />

				<setInputField name="newuser:customerFirstName" value="New" />
				<setInputField name="newuser:customerLastName" value="User" />
				<setInputField name="newuser:customerAddress1" value="Apt 2" />
				<setInputField name="newuser:customerAddress2" value="11/36-66 User Av" />
				<setInputField name="newuser:customerCity" value="Userton" />
				<setInputField name="newuser:customerState" value="U" />
				<setInputField name="newuser:customerZip" value="1" />
				<verifyText text="not a well-formed email address"/>				
				<clickButton label="Next" />
				
				<verifyText text="length must be between 2 and 2" />
				<verifyText text="length must be between 5 and 10" />
				
				<setInputField name="newuser:customerState" value="UR" />
				<setInputField name="newuser:customerState" value="12345" />
				<setInputField name="newuser:customerEmail" value="user@user.com" />
				<clickButton label="Next" />
				
			</steps>
		</webtest>
	</target>

</project>
