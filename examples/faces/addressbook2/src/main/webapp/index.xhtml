<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:m="http://metawidget.org/faces"
				template="WEB-INF/tags/page.xhtml">
      
		<f:loadBundle basename="org.metawidget.example.shared.addressbook.resource.Resources" var="bundle"/>
		
		<div id="page-image">
			<img src="media/addressbook.gif" alt=""/>
		</div>

		<div id="content">

			<h:form id="form">

				<h:messages />

				<m:metawidget value="#{contactSearch.current}">
					<f:facet name="footer">
						<m:metawidget value="#{contactSearch}" rendererType="simple"/>
					</f:facet>
				</m:metawidget>

			</h:form>

			<h:dataTable value="#{contactSearch.results}" var="_contact" styleClass="data-table" columnClasses="column-half, column-half, column-tiny" rowClasses="row-odd, row-even">

				<h:column>
					<f:facet name="header">
						<h:outputText value="Name"/>
					</f:facet>
					<h:outputLink value="contact.jsf">
						<f:param name="contact.load" value="#{_contact.id}"/>
						<h:outputText value="#{_contact.fullname}"/>
					</h:outputLink>
				</h:column>

				<h:column>
					<f:facet name="header">
						<h:outputText value="Contact"/>
					</f:facet>
					<h:outputText value="#{_contact.communications}"/>
				</h:column>

				<h:column>
					<f:facet name="header">
						<h:outputText value="&nbsp;" escape="false"/>
					</f:facet>
					<h:graphicImage value="media/personal-small.gif" rendered="#{_contact.class.simpleName == 'PersonalContact'}" alt="Personal Contact"/>
					<h:graphicImage value="media/business-small.gif" rendered="#{_contact.class.simpleName == 'BusinessContact'}" alt="Business Contact"/>
				</h:column>

			</h:dataTable>

		</div>

</ui:composition>
