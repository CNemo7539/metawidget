<project name="metawidget-seam-booking" default="build">

	<!-- Properties -->
		
	<property file="build.properties"/>
	
	<!-- Clean -->
	
	<target name="clean">
		<delete dir="${seam.dir}/examples/metawidget-groovybooking"/>
	</target>

	<!-- Build -->

	<target name="build">

		<delete dir="${seam.dir}/examples/metawidget-groovybooking"/>
		
		<!-- Copy the original Seam groovybooking example -->
		
		<copy todir="${seam.dir}/examples/metawidget-groovybooking">
			<fileset dir="${seam.dir}/examples/groovybooking"/>
		</copy>
		
		<!-- Clean it -->
		
		<ant dir="${seam.dir}/examples/metawidget-groovybooking" target="clean" inheritall="false"/>		

		<!-- Replace some files with Metawidget versions -->

		<copy todir="${seam.dir}/examples/metawidget-groovybooking" overwrite="true">
			<fileset dir=".">
				<include name="resources/**"/>
				<include name="src/**"/>
				<include name="view/**"/>
			</fileset>
		</copy>

    	<copy todir="${seam.dir}/examples/metawidget-groovybooking/exploded-archives/jboss-seam-groovybooking.war/WEB-INF/lib">
    		<fileset dir="../../../../">
    			<include name="metawidget.jar"/>
    		</fileset>
		</copy>

		<copy todir="${seam.dir}/lib" file="../../../../metawidget.jar"/>

		<ant dir="${seam.dir}/examples/metawidget-groovybooking" inheritall="false"/>
		
	</target>

</project>
